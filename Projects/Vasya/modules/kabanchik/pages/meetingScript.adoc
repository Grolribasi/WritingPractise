:experimental:

= Игра в техписа

На этой встрече я предлагаю сыграть в занимательную игру в техписа. Только практика, только хардкор!

.Мы научимся:
. Создавать документацию в AsciiDoc
. Организовывать исходные файлы по папкам
. Создавать свой сайт из исходников одной командой
. И, может, даже узнаем, как настроить внешний вид сайта

== Вводная

Привет, коллеги, я хочу сыграть с вами в одну игру. Обещаю без жестокости. Я хочу показать, как создаётся документация изнутри. Если будете следовать инструкции, то всё получится. Итак, поехали!

== Начало

. Для начала создайте новую папку на своём компьютере.
+
. В этой папке создайте папку имени себя. Лучше писать имя без пробелов и латиницей. Это будет ваша главная папка проекта, запомните её.
. Отлично. А теперь откройте только что созданную папку.
. В этой папке создайте папку с именем `modules`.
. Перейдите в папку `modules` и создайте в ней папку с именем `kabanchik`.
. Перейдите в папку `kabanchik` и создайте в ней ещё две папки с именами: `pages` и `images`.
. Проверьте, что у вас получилась структура как у меня.

****
Что мы сейчас сделали? Мы только что создали необходимую структуру папок, в которой мы будем писать документацию для сайта.
****

== Страница

Теперь давайте создадим страницу сайта. Это будет одностраничный лендинг.

. Откройте самый обыкновенный блокнот.
// ТЕКСТ КРУПНЕЕ!!
. В блокноте на первой строке введите знак равно: `=`, а после него напишите что-нибудь по-русски, например "Мама, я - техпис!". Это будет заголовок страницы.
. Нажмите kbd:[Enter] два раза, чтобы получилось как у меня.
. Давайте наполним нашу страницу текстом.
. Что бы написать? Давайте перечислим три любимые вещи с новой строки.
+
[source,asciidoc]
----
Носки,
Шапки,
Футболки.
----
+
И добавляем перед каждым словом точку и пробел после него вот так:
+
[source,asciidoc]
----
. Носки,
. Шапки,
. Футболки.
----
+
. Чего-то не хватает, надо озаглавить список.
+
Ставим курсор над первой любимой вещью, переносим строку, ставим точку и начинаем писать без пробела: "Мои любимые вещи:".

Самые быстрые могут ещё добавить предисловие вида: `Меня зовут {nm} и моя должность {dty}.`.

== Картинки

Давайте добавим иллюстрации к нашим пунктам.

. Иллюстрации добавляются легко, нужно только добавить следующий код после каждого пункта списка:
+
[source,asciidoc]
----
image:sock.jpg[]
image:hat.jpg[]
image:tee.jpg[]
----
+
Иллюстрации нужно *скопировать* из моей папки, которую я пришлю в чат: `\\109PC0106\resources` и поместить в свою menu:главную папку проекта[modules > kabanchik > images].
+
. Справились? Теперь давайте сохраним наш файл.
. В блокноте нажмите menu:[Файл > Сохранить как].
. В появившемся окне укажите путь до папки: `\modules\kabanchik\pages`.
. В имени файла укажите что-нибудь на латинице с расширением `.adoc`. Например, `favorites.adoc`, в списке тип файла обязательно выберите "Все файлы", а не "Текстовый документ". Кодировку не меняйте.

== Antora.yml

Следующий этап создание версии компонента. Вы можете спросить "Чёйто такое?", но я вам не отвечу, потому что это не важно.

. Откройте новое окно блокнота.
// ТЕКСТ КРУПНЕЕ!!
. В блокноте напишите следующее:
+
[source,yaml]
----
name: mysite
version: 1
title: Секретный компонент
----
+
Напишите name, поставьте двоеточие, пробел, напишите произвольное слово латиницей. Это будет имя компонента.
+
С новой строки напишите version, поставьте двоеточие, пробел, напишите цифру. Это будет версия компонента.
+
На третьей строке напишите title, поставьте двоеточие, пробел, напишите что-нибудь в любой раскладке. Например, "Секретный компонент". Это будет человекочитаемое название компонента.
+
Те, кому скучно могут дописать ещё несколько строк:
+
[source,yaml]
----
name: mycomponent
version: 1
title: Секретный компонент
asciidoc:
  attributes:
    nm: 'Владимир Маркиев'
    dty: 'Технический писатель'
----
+
Обратите внимание, что перед строками `attributes:`, `nm:` и `dty:` нужно делать двойной пробел.
+
. Добавим ещё две строки в файл. С новой строки наберите `nav:` с двоеточием, перенесите строку, поставьте чёрточку, напишите расположение файла навигации:
+
[source,yaml]
----
nav:
- modules/kabanchik/nav.adoc
----
+
Затем, с новой строки напишите `start_page:` с двоеточием, укажите через двоеточие модуль:и-стартовую страницу. Модуль у нас kabanchik, потому что он располагается в папке `modules`. Стартовая страница -- `favorites.adoc`, потому что у нас другой и нет.
+
[source,yaml]
----
start_page: kabanchik:favorites.adoc
----
+
Ваш файл должен будет выглядеть вот так:
+
[source,yaml]
----
name: mycomponent
version: 1
title: Секретный компонент
asciidoc:
  attributes:
    nm: 'Владимир Маркиев'
    dty: 'Технический писатель'
nav:
- modules/kabanchik/nav.adoc
start_page: kabanchik:favorites.adoc
----
+
. Сохраните файл в своей главной папке проекта `Vsaya\antora.yml`, назвав его `antora.yml` также, укажите тип файла "Все файлы".

== Навигация

Мы успешно создали версию компонента, создали страницу, но не создали файл навигации. Исправляемся.

. Открываем блокнот снова. Мы будем создавать ненумерованный список с заголовком:
+
В списке указываем нашу страницу и заголовок:
+
[source,asciidoc]
----
.Навигация
* xref:favorites.adoc[]
----
+
`xref:` говорит нам, что это перекрёстная ссылка (cross reference), `favorites.adoc` - это страница, на которую мы ссылаемся, а квадратные скобки `[]` закрывают ссылку.
+
. Сохраняем файл в папке `\Vsaya\modules\kabanchik` с названием `nav.adoc`. Что может быть проще?

== Playbook

Итак, у нас есть почти все компоненты, необходимые для постройки сайта.  Остаётся последний компонент -- это файл playbook. Основная инструкция, которая указывает как строить сайт с документацией.

Я предлагаю вам просто скопировать файл к себе, а я попытаюсь кратко объяснить, что к чему:

[source,yaml]
----
site:
  title: Wой Wаленький Wайт
# Заголовок сайта
  start_page: mycomponent:kabanchik:favorites.adoc
# Начальная страница
content:
  sources:
    - url: .
      start_path: .
  branches: main
# Источники
ui:
  bundle:
    url: ./ui-bundle.zip
# Упаковка с интерфейсом
output:
  dir: mysite
# Куда складывать файлы сайта
----

== Запускаем Antora, публикуем сайт

Мы готовы запустить создание сайта. Чтобы запустить генератор сайтов -- Антора, нужно выполнить команду из консоли. Но прежде понадобится скопировать несколько файлов себе на компьютер.

.Чтобы скопировать папку себе на компьютер:
. Откройте любую папку на вашем компьютере.
. А теперь откройте папку `\\109PC0106\resources`.
. В этой папке найдите папку `node_modules`, папку `.git` и файл `ui-bundle.zip` скопируйте их себе на компьютер в главную папку проекта, которая озаглавлена вашим именем.
. Затем запустите командную строку (kbd:[кнопка пуск + R]. Вводим `powershell`.
. Нажмите левой кнопкой мыши в адресной строке главной папки проекта на своём компьютере.
. Выделите весь адрес и скопируйте его kbd:[Ctrl + C].
. Вернитесь в окно командной строки, введите на латинице `cd`, поставьте пробел и вставьте скопированный на предыдущем шаге адрес kbd:[Ctrl + V].
. Нажмите kbd:[Enter].
. Теперь скопируйте из чата команду `npx antora antora-playbook.yml`.
. Нажмите kbd:[Enter].

Вы создали свой первый сайт при помощи Antora и AsciiDoc. Можете поздравить себя и зайти в папку `\mysite`, открыть файл `index.html`, чтобы посмотреть сайт вживую.

== Внешний вид сайта (UI)

Быстренько расскажу, из чего состоит пользовательский интерфейс сайта. Уж извините, что без практики.

`d:\online-docs\antora-ui-default\`

В корневой папке UI нет ничего особенно примечательного, кроме файлов, помогающих собрать его воедино. Самые интересные вещи лежат в папке `src`.

Тут есть папка для файлов стилизации внешнего вида сайта -- `css`, папка для файлов, настраивающих интерактивные элементы -- `js` и так далее.

Нас интересует папка `partials`, в ней лежат файлы `.hbs`. Это шаблоны страниц сайта, например, `article-404.hbs`. Они состоят из непонятного кода, но периодически среди кода проскакивают русские слова. Таким образом мы можем перевести сайт на любой язык.

Если вы считаете себя креативным дизайнером, можно добавить красивые фишки и сделать совсем новый и свежий дизайн. В общем-то возможности не ограничены, особенно если вы знаете Javascript, HTML и т.д.

На этом всё. Буду рад метнуться кабанчиком и порешать ваши вопросики, если они есть.

Сценарий этой встречи можно найти в папке `\\109pc0106\митап 2`, файл `TechWritMeeting.adoc`. Или в https://github.com/Grolribasi/WritingPractise[репозитории GitHub] со всеми-всеми материалами.
